<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About — Joel Tenenberg</title>
    <link rel="icon" type="image/svg+xml" href="media/logo/LOGO.svg">
    <link rel="stylesheet" href="style.css">
    <script src="header.js" defer></script>
</head>
<body>
    <div id="sharedHeader"></div>

    <!-- About Content -->
    <main class="section">
        <div class="container">
            <section class="section about-section" id="aboutSection">
                <div class="container row row--2col" >
                    
                    <div class="col">
                        <h2 class="simple-h">About</h2>
                        <p class="simple-p">I build thoughtful digital experiences that bridge code and craft. My work focuses on interaction, clarity, and performance — whether that's a research project, a product, or an experimental interface.</p>
                        <p class="simple-p">If you'd like to see a concise overview of my background, skills, and experience, download my CV below.</p>
                        <div class="about-actions">
                            <a class="cv-download" href="Joel_Tenenberg_CV.pdf" download>Download CV</a>
                        </div>
                    </div>
                    <div class="col">
                        <div class="image-stack">
                            <picture class="stacked behind">
                                <source type="image/webp" srcset="media/about/profile2-small.webp 400w, media/about/profile2.webp 800w" sizes="(max-width: 600px) 400px, 800px">
                                <img src="media/about/profile2.jpg" srcset="media/about/profile2-small.jpg 400w, media/about/profile2.jpg 800w" sizes="(max-width: 600px) 400px, 800px" alt="Joel Tenenberg" class="simple-img" loading="lazy" onerror="this.onerror=null;this.src='https://picsum.photos/400/400?random=98'">
                            </picture>

                            <picture class="stacked front">
                                <source type="image/webp" srcset="media/about/profile-small.webp 400w, media/about/profile.webp 800w" sizes="(max-width: 600px) 400px, 800px">
                                <img src="media/about/profile.jpg" id="draggableImage" srcset="media/about/profile-small.jpg 400w, media/about/profile.jpg 800w" sizes="(max-width: 600px) 400px, 800px" class="simple-img draggable-img" alt="Joel Tenenberg 2" loading="lazy" onerror="this.onerror=null;this.src='https://picsum.photos/400/400?random=99'">
                            </picture>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Animation Fullscreen Overlay (hidden by default) -->
    <div class="animation-fullscreen-overlay" id="animationOverlay" style="display: none;">
        <button class="close-button-topleft" id="closeButton">×</button>
        <div class="intro-root">
            <canvas id="metaballCanvas" class="metaball-canvas"></canvas>
            <canvas id="cursorCanvas" class="cursor-canvas"></canvas>
        </div>
    </div>
    <!-- Include main script so menu marker and behavior work -->
    <script src="script.js"></script>
    <script>
    (function(){
        const img = document.getElementById('draggableImage');
        if (!img) return;
        const container = img.closest('.image-stack');
        if (!container) return;

        const containerStyle = getComputedStyle(container);
        if (containerStyle.position === 'static') container.style.position = 'relative';

        img.style.touchAction = 'none';
        img.style.transform = 'translate(0px, 0px)';
        img.style.cursor = 'grab';

        let dragging = false;
        let startPointerX = 0;
        let startPointerY = 0;
        let startTranslateX = 0;
        let startTranslateY = 0;
        let currentTranslateX = 0;
        let currentTranslateY = 0;
        const clamp = (value, limit) => Math.max(-limit, Math.min(limit, value));
        let limitX = window.innerWidth;
        let limitY = window.innerHeight;

        const updateLimits = () => {
            limitX = Math.max(window.innerWidth, container.clientWidth);
            limitY = Math.max(window.innerHeight, container.clientHeight);
        };
        window.addEventListener('resize', updateLimits);
        updateLimits();

        const updateTransform = (x, y) => {
            currentTranslateX = x;
            currentTranslateY = y;
            img.style.transform = `translate(${x}px, ${y}px)`;
        };

        img.addEventListener('pointerdown', function(event){
            event.preventDefault();
            dragging = true;
            startPointerX = event.clientX;
            startPointerY = event.clientY;
            startTranslateX = currentTranslateX;
            startTranslateY = currentTranslateY;
            img.setPointerCapture?.(event.pointerId);
            img.style.cursor = 'grabbing';
        });

        const onPointerMove = function(event){
            if (!dragging) return;
            event.preventDefault();
            const dx = event.clientX - startPointerX;
            const dy = event.clientY - startPointerY;
            const nextX = clamp(startTranslateX + dx, limitX);
            const nextY = clamp(startTranslateY + dy, limitY);
            updateTransform(nextX, nextY);
        };

        const endDrag = function(event){
            if (!dragging) return;
            event.preventDefault();
            dragging = false;
            img.releasePointerCapture?.(event.pointerId);
            img.style.cursor = 'grab';
        };

        document.addEventListener('pointermove', onPointerMove);
        document.addEventListener('pointerup', endDrag);
        document.addEventListener('pointercancel', endDrag);
    })();
    </script>
</body>
</html>
